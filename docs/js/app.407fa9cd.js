(function(e){function t(t){for(var a,r,i=t[0],c=t[1],s=t[2],d=0,g=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&g.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(g.length)g.shift()();return l.push.apply(l,s||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(a=!1)}a&&(l.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},o={app:0},l=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/nested--draggable/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=c;l.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"183d":function(e,t,n){},2411:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello-world"},[n("div",[n("el-button",{attrs:{type:"primary"},on:{click:e.addLabel}},[e._v("添加卡片")])],1),n("div",{staticClass:"wrapper"},[n("combine-area",{attrs:{isEdit:e.isEdit,initTreeData:e.treeData}})],1)])},l=[],r=(n("14d9"),n("ed09")),i={name:"HelloWorld",setup:function(){var e=Object(r["c"])({level:0,operator:"且",tags:[]}),t=Object(r["d"])(0),n=function(){var n={uid:t.value,name:"卡片"+t.value,valueDesc:"卡片详细信息"};t.value++,e.tags.push(n)},a=Object(r["d"])(!1),o=function(){a.value=!a.value,a.value&&(e.tags=[],e.tags=treeDataMock.tags,e.operator=treeDataMock.operator)};return{treeData:e,isEdit:a,addLabel:n,changeEdit:o}}},c=i,s=(n("e61e"),n("2877")),u=Object(s["a"])(c,o,l,!1,null,"56dac7f6",null),d=u.exports,g=n("5c96"),p=n.n(g),v=(n("0fae"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tree-condition",{key:e.id,attrs:{tree:e.tree,level:0,groupId:e.groupId},on:{nodeChange:e.nodeChange,"update:groupId":function(t){e.groupId=t},"update:group-id":function(t){e.groupId=t}}})}),f=[],h=(n("4de4"),n("c740"),n("a434"),n("e9f5"),n("910d"),n("7d54"),n("d3b7"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"tree-condition",class:e.level>0?"tree-display__bg":""},[e.level&&e.genTree.tags.length?n("div",{staticClass:"tree-condition__head"},[n("div",{staticClass:"tree-condition__head__title"},[e._v("条件组"+e._s(e.level)+"层，id："+e._s(e.localTree.groupId))]),n("div",{on:{click:function(t){return e.onDelGroup(e.genTree.tags)}}},[e._v("删除")])]):e._e(),n("div",{staticClass:"tree-display"},[e.genTree.tags.length?[e.genTree.tags.length>1?n("div",{staticClass:"tree-display__op"},[n("i",{staticClass:"op-line"}),n("div",{staticClass:"op-name",on:{click:e.changeOpt}},[e._v(e._s(e.genTree.operator))])]):e._e(),n("div",{staticClass:"tree-display__list"},[n("draggable",e._b({staticClass:"drag-wrapper",attrs:{value:e.genTree.tags||[]},on:{input:function(t){return e.onInput(t,e.genTree,e.level)},add:function(t){return e.addComponent(t,e.genTree.tags,e.level)},remove:function(t){return e.removeComponent(t,e.genTree.tags,e.level)}}},"draggable",e.dragOption,!1),e._l(e.genTree.tags,(function(t,a){return n("div",{key:t.level+""+a},[t.tags?n("TreeCondition",{attrs:{tree:t,level:e.level+1},on:{nodeChange:e.nodeChange}}):n("div",{staticClass:"tag-item"},[n("single-card",{attrs:{tree:e.genTree,tag:t,index:a,closable:!1,level:e.level},on:{onExpand:e.onExpand,onDel:e.onDel}})],1)],1)})),0)],1)]:e.genTree.tags?e._e():[n("single-card",{attrs:{tree:e.tree,tag:e.tree,closable:!1,level:e.level},on:{onDel:e.onDel}})]],2)])}),b=[],_=n("5530"),m=(n("a9e3"),n("b64b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"single-card",class:e.tag.level>0?"single-card__bg":""},[n("div",{staticClass:"single-card__head"},[n("div",{staticClass:"single-card__head__title"},[e._v(e._s(e.labelName))]),n("div",{staticClass:"single-card__head__opt"},[n("p",{on:{click:e.toExpand}},[e._v("扩展")]),n("p",{staticStyle:{"margin-left":"10px"},on:{click:e.toDel}},[e._v("删除")])])]),n("div",{staticClass:"desc"},[e._v(" "+e._s(e.labelDesc))])])}),T=[],C=(n("b0c0"),0),O={name:"SingleCard",props:{tag:Object,tree:Object,level:Number},setup:function(e,t){var n=Object(r["a"])((function(){return e.tag.name})),a=Object(r["a"])((function(){return e.tag.valueDesc})),o=function(){t.emit("onExpand",Object(_["a"])(Object(_["a"])({},e.tag),{},{level:e.level,groupId:C})),C++},l=function(){t.emit("onDel",e.tag)};return{groupId:C,labelDesc:a,labelName:n,toExpand:o,toDel:l}}},j=O,y=(n("741e"),Object(s["a"])(j,m,T,!1,null,"3998cf46",null)),x=y.exports,D=n("b76a"),I=n.n(D),E=(n("2ef0"),{name:"TreeCondition",components:{SingleCard:x,TreeCondition:void 0,Draggable:I.a},props:{tree:Object,level:Number,groupId:Number},data:function(){return{localTree:this.tree}},computed:{dragOption:function(){return{animation:50,group:{name:"1",pull:!0,put:!0},ghostClass:"ghost"}},genTree:function(){return this.tree}},watch:{},methods:{onInput:function(e,t,n){var a=this;this.$nextTick((function(){a.localTree.tags=e,a.$emit("nodeChange",a.localTree)}))},changeOpt:function(){this.localTree.operator="且"===this.localTree.operator?"或":"且"},onExpand:function(e){var t,n,a=this;null===(t=this.localTree)||void 0===t||null===(n=t.tags)||void 0===n||n.forEach((function(t,n){t.uid===e.uid&&(a.localTree.tags[n]={level:e.level+1,operator:"且",tags:[Object(_["a"])(Object(_["a"])({},e),{},{level:e.level+1})],groupId:e.groupId+1})})),this.localTree.groupId=e.groupId,this.$nextTick((function(){a.$emit("nodeChange",a.localTree)}))},onDel:function(e){var t=this;this.$nextTick((function(){var n,a,o=null===(n=t.localTree)||void 0===n||null===(a=n.tags)||void 0===a?void 0:a.findIndex((function(t){return t.uid===e.uid}));o>-1&&t.localTree.tags.splice(o,1),t.$emit("nodeChange",t.localTree)}))},onDelGroup:function(e){this.localTree.tags=[],this.nodeChange()},nodeChange:function(e){var t,n;console.log(e,111),(null===(t=this.localTree)||void 0===t||null===(n=t.tags)||void 0===n||!n.length||e&&!Object.keys(e).length)&&(this.localTree={}),console.log(this.localTree),this.$emit("nodeChange",this.localTree)},addComponent:function(e,t,n){1===n?(t.forEach((function(e){return e.level=n})),this.localTree.operator="且"):0===n&&(this.$nextTick((function(){var e=t.findIndex((function(e){var t;return 0===(null===e||void 0===e||null===(t=e.tags)||void 0===t?void 0:t.length)}));e>-1&&t.splice(e,1)})),this.tree.tags.forEach((function(e){return e.level=n})))},removeComponent:function(e,t,n){}}}),k=E,w=(n("f470"),Object(s["a"])(k,h,b,!1,null,"200558a4",null)),$=w.exports,S={components:{TreeCondition:$},props:{initTreeData:Object,isEdit:Boolean},setup:function(e,t){var n=null!==e&&void 0!==e&&e.initTreeData?Object(r["c"])(e.initTreeData):Object(r["c"])(treeData),a=Object(r["d"])(1),o=Object(r["d"])(1),l=function(e){var t,a;e.tags&&(e.tags=null===e||void 0===e||null===(t=e.tags)||void 0===t?void 0:t.filter((function(e){var t;return!(null!==e&&void 0!==e&&e.tags)||!e.level||e.tags&&(null===(t=e.tags)||void 0===t?void 0:t.length)}))),null!==e&&void 0!==e&&null!==(a=e.tags)&&void 0!==a&&a.length?e.tags.forEach((function(e){return l(e)})):"number"!==typeof e.uid&&i(n,e.groupId,e.level)},i=function(e,t,n){if(e.tags){var a,o,r=null===(a=e.tags)||void 0===a?void 0:a.findIndex((function(e){return e.groupId===t&&e.level===n}));if(-1===r)e.tags.forEach((function(e){i(e,t,n)}));else null===e||void 0===e||null===(o=e.tags)||void 0===o||o.splice(r,1),e.tags.length||l(e)}},c=function(e){l(n),a.value+=1};return{id:a,tree:n,groupId:o,nodeChange:c,dragOption:{animation:50,group:{name:"1",pull:!1,put:!0},ghostClass:"ghost"}}}},P=S,M=Object(s["a"])(P,v,f,!1,null,null,null),N=M.exports,G=function(e){e.component("CombineArea",N)},J={install:G};a["default"].config.productionTip=!1,a["default"].use(r["b"]),a["default"].use(p.a),a["default"].use(J),new a["default"]({render:function(e){return e(d)}}).$mount("#app")},"741e":function(e,t,n){"use strict";n("183d")},c72d:function(e,t,n){},e61e:function(e,t,n){"use strict";n("c72d")},f470:function(e,t,n){"use strict";n("2411")}});
//# sourceMappingURL=app.407fa9cd.js.map