(function(e){function t(t){for(var a,l,i=t[0],c=t[1],s=t[2],d=0,g=[];d<i.length;d++)l=i[d],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&g.push(o[l][0]),o[l]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(g.length)g.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(a=!1)}a&&(r.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},o={app:0},r=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/nested--draggable/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"00dd":function(e,t,n){},"3fe5":function(e,t,n){"use strict";n("6c0b")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("img",{attrs:{src:n("cf05")}}),a("router-view")],1)},r=[],l={name:"App"},i=l,c=(n("62ed"),n("2877")),s=Object(c["a"])(i,o,r,!1,null,null,null),u=s.exports,d=n("5c96"),g=n.n(d),p=n("8c4f"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello-world"},[n("div",[n("el-button",{attrs:{type:"primary"},on:{click:e.addLabel}},[e._v("添加")])],1),n("div",[n("el-button",{attrs:{type:"primary"},on:{click:e.changeEdit}},[e._v("编辑反显")])],1),n("div",{staticClass:"wrapper"},[n("combine-area",{attrs:{isEdit:e.isEdit,initTreeData:e.treeData}})],1)])},f=[],h=(n("14d9"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tree-condition",{key:e.id,attrs:{tree:e.tree,level:0,groupId:e.groupId},on:{nodeChange:e.nodeChange,"update:groupId":function(t){e.groupId=t},"update:group-id":function(t){e.groupId=t}}})}),b=[],_=(n("4de4"),n("d3b7"),n("159b"),n("c740"),n("a434"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"tree-condition",class:e.level>0?"tree-display__bg":""},[e.level&&e.genTree.tags.length?n("div",{staticClass:"tree-condition__head"},[n("div",{staticClass:"tree-condition__head__title"},[e._v("条件组"+e._s(e.level)+"层，id："+e._s(e.localTree.groupId))]),n("div",{on:{click:function(t){return e.onDelGroup(e.genTree.tags)}}},[e._v("删除")])]):e._e(),n("div",{staticClass:"tree-display"},[e.genTree.tags.length?[e.genTree.tags.length>1?n("div",{staticClass:"tree-display__op"},[n("i",{staticClass:"op-line"}),n("div",{staticClass:"op-name",on:{click:e.changeOpt}},[e._v(e._s(e.genTree.operator))])]):e._e(),n("div",{staticClass:"tree-display__list"},[n("draggable",e._b({staticClass:"drag-wrapper",attrs:{value:e.genTree.tags||[]},on:{input:function(t){return e.onInput(t,e.genTree,e.level)},add:function(t){return e.addComponent(t,e.genTree.tags,e.level)},remove:function(t){return e.removeComponent(t,e.genTree.tags,e.level)}}},"draggable",e.dragOption,!1),e._l(e.genTree.tags,(function(t,a){return n("div",{key:t.level+""+a},[t.tags?n("TreeCondition",{attrs:{tree:t,level:e.level+1},on:{nodeChange:e.nodeChange}}):n("div",{staticClass:"tag-item"},[n("single-card",{attrs:{tree:e.genTree,tag:t,index:a,closable:!1,level:e.level},on:{onExpand:e.onExpand,onDel:e.onDel}})],1)],1)})),0)],1)]:e.genTree.tags?e._e():[n("single-card",{attrs:{tree:e.tree,tag:e.tree,closable:!1,level:e.level},on:{onDel:e.onDel}})]],2)])}),m=[],T=n("5530"),C=(n("a9e3"),n("b64b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"single-card",class:e.tag.level>0?"single-card__bg":""},[n("div",{staticClass:"single-card__head"},[n("div",{staticClass:"single-card__head__title"},[e._v(e._s(e.labelName))]),n("div",{staticClass:"single-card__head__opt"},[n("p",{on:{click:e.toExpand}},[e._v("扩展")]),n("p",{staticStyle:{"margin-left":"10px"},on:{click:e.toDel}},[e._v("删除")])])]),n("div",{staticClass:"desc"},[e._v(" "+e._s(e.labelDesc))])])}),O=[],j=(n("b0c0"),n("ed09")),y=0,x={name:"SingleCard",props:{tag:Object,tree:Object,level:Number},setup:function(e,t){var n=Object(j["a"])((function(){return e.tag.name})),a=Object(j["a"])((function(){return e.tag.valueDesc})),o=function(){t.emit("onExpand",Object(T["a"])(Object(T["a"])({},e.tag),{},{level:e.level,groupId:y})),y++},r=function(){t.emit("onDel",e.tag)};return{groupId:y,labelDesc:a,labelName:n,toExpand:o,toDel:r}}},D=x,E=(n("8f10"),Object(c["a"])(D,C,O,!1,null,"7df560b8",null)),I=E.exports,k=n("b76a"),w=n.n(k),$=(n("2ef0"),{name:"TreeCondition",components:{SingleCard:I,TreeCondition:void 0,Draggable:w.a},props:{tree:Object,level:Number,groupId:Number},data:function(){return{localTree:this.tree}},computed:{dragOption:function(){return{animation:50,group:{name:"1",pull:!0,put:!0},ghostClass:"ghost"}},genTree:function(){return this.tree}},watch:{},methods:{onInput:function(e,t,n){var a=this;this.$nextTick((function(){a.localTree.tags=e,a.$emit("nodeChange",a.localTree)}))},changeOpt:function(){this.localTree.operator="且"===this.localTree.operator?"或":"且"},onExpand:function(e){var t,n,a=this;null===(t=this.localTree)||void 0===t||null===(n=t.tags)||void 0===n||n.forEach((function(t,n){t.uid===e.uid&&(a.localTree.tags[n]={level:e.level+1,operator:"且",tags:[Object(T["a"])(Object(T["a"])({},e),{},{level:e.level+1})],groupId:e.groupId+1})})),this.localTree.groupId=e.groupId,this.$nextTick((function(){a.$emit("nodeChange",a.localTree)}))},onDel:function(e){var t=this;this.$nextTick((function(){var n,a,o=null===(n=t.localTree)||void 0===n||null===(a=n.tags)||void 0===a?void 0:a.findIndex((function(t){return t.uid===e.uid}));o>-1&&t.localTree.tags.splice(o,1),t.$emit("nodeChange",t.localTree)}))},onDelGroup:function(e){this.localTree.tags=[],this.nodeChange()},nodeChange:function(e){var t,n;console.log(e,111),(null===(t=this.localTree)||void 0===t||null===(n=t.tags)||void 0===n||!n.length||e&&!Object.keys(e).length)&&(this.localTree={}),console.log(this.localTree),this.$emit("nodeChange",this.localTree)},addComponent:function(e,t,n){1===n?(t.forEach((function(e){return e.level=n})),this.localTree.operator="且"):0===n&&(this.$nextTick((function(){var e=t.findIndex((function(e){var t;return 0===(null===e||void 0===e||null===(t=e.tags)||void 0===t?void 0:t.length)}));e>-1&&t.splice(e,1)})),this.tree.tags.forEach((function(e){return e.level=n})))},removeComponent:function(e,t,n){}}}),S=$,P=(n("3fe5"),Object(c["a"])(S,_,m,!1,null,"0fc7a6a9",null)),M=P.exports,N={components:{TreeCondition:M},props:{initTreeData:Object,isEdit:Boolean},setup:function(e,t){var n=null!==e&&void 0!==e&&e.initTreeData?Object(j["c"])(e.initTreeData):Object(j["c"])(treeData),a=Object(j["d"])(1),o=Object(j["d"])(1),r=function e(t){var a,o;t.tags&&(t.tags=null===t||void 0===t||null===(a=t.tags)||void 0===a?void 0:a.filter((function(e){var t;return!(null!==e&&void 0!==e&&e.tags)||!e.level||e.tags&&(null===(t=e.tags)||void 0===t?void 0:t.length)}))),null!==t&&void 0!==t&&null!==(o=t.tags)&&void 0!==o&&o.length?t.tags.forEach((function(t){return e(t)})):"number"!==typeof t.uid&&l(n,t.groupId,t.level)},l=function e(t,n,a){if(t.tags){var o,l,i=null===(o=t.tags)||void 0===o?void 0:o.findIndex((function(e){return e.groupId===n&&e.level===a}));if(-1===i)t.tags.forEach((function(t){e(t,n,a)}));else null===t||void 0===t||null===(l=t.tags)||void 0===l||l.splice(i,1),t.tags.length||r(t)}},i=function(e){r(n),a.value+=1};return{id:a,tree:n,groupId:o,nodeChange:i,dragOption:{animation:50,group:{name:"1",pull:!1,put:!0},ghostClass:"ghost"}}}},A=N,G=Object(c["a"])(A,h,b,!1,null,null,null),H=G.exports,J={name:"HelloWorld",components:{CombineArea:H},setup:function(){var e=Object(j["c"])({level:0,operator:"且",tags:[]}),t=Object(j["d"])(0),n=function(){var n={uid:t.value,name:"卡片"+t.value,valueDesc:"卡片详细信息"};t.value++,e.tags.push(n)},a=Object(j["d"])(!1),o=function(){a.value=!a.value,a.value&&(e.tags=[],e.tags=treeDataMock.tags,e.operator=treeDataMock.operator)};return{treeData:e,isEdit:a,addLabel:n,changeEdit:o}}},L=J,W=(n("e02d"),Object(c["a"])(L,v,f,!1,null,"58b40c2a",null)),B=W.exports;a["default"].use(p["a"]);var q=new p["a"]({routes:[{path:"/",name:"HelloWorld",component:B}]});a["default"].config.productionTip=!1,a["default"].use(j["b"]),a["default"].use(g.a),new a["default"]({router:q,render:function(e){return e(u)}}).$mount("#app")},"62ed":function(e,t,n){"use strict";n("8b7c")},"6c0b":function(e,t,n){},"8b7c":function(e,t,n){},"8f10":function(e,t,n){"use strict";n("00dd")},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},e02d:function(e,t,n){"use strict";n("f85d")},f85d:function(e,t,n){}});
//# sourceMappingURL=app.df5a13f4.js.map